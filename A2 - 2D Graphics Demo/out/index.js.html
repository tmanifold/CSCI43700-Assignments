<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: index.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: index.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

// references for jsdoc style-guide:
// https://devhints.io/jsdoc
// https://gist.github.com/customcommander/5206dcb44670e34f6923b62c1781e1d2
// https://docs.w3cub.com/jsdoc/

/**
    Width of the canvas
    @type {number}
*/
const CANVASX = 640;
/**
    Height of the canvas
    @type {number}
*/
const CANVASY = 480;
/**
    The maximum number of objects on the canvas at one time
    @type {number}
*/
const MAX_OBJ = 10;
/**
    The minimum allowed value for the components of Circle.dV

    When the minimum is reached, the components if Circle.dV will be set to 0.
    @type {number}
*/
const MIN_DELTA = 0.5; // minimum allowed dx or dy value

/**
    The amount of gravity to apply to objects
    @type {number}
*/
var G = 1;
/**
    The amount of friction to apply to objects.

    Friction is applied to Circle.dV when collisions are detected, reducing
    the object's velocity until it comes to rest.
    @type {number}
*/
var friction = 0.95;

/**
    Constructs a Vector2.

    A vector2 is a 2-dimensional vector consisting of the components x and y

    @class
*/
class Vector2 {
    /**
        @constructs Vector2
        @param {number} a - the component corresponding to x-value
        @param {number} b - the component corresponding to y-value
    */
    constructor(a, b) {
        this.x = a;
        this.y = b;
    }

    /**
        Adds the components of another vector to this vector.

        @param {Vector2} v - The vector to add to this one.
        @return {vector2|null} The updated vector or null if an error occurs.
    */
    add(v) {

        try {
            // component add
            this.x += v.x;
            this.y += v.y;

            return this;
        } catch (e) {
            console.log(e);
            return null;
        }
    }

    /**
        Compute the dot product of this vector and another vector.

        @param {Vector2} v - The vector to dot with this one.
        @return {number|null} The dot product or null if an error occurs.
    */
    dotProduct(v) {

        try {
            return (this.x * v.x) + (this.y + v.y);
        } catch (e) {
            console.log(e);
            return null;
        }
    }

    /**
        Validates that the given parameter is a Vector2

        @param {Vector2} v - The object to validate
        @throws {TypeError} Thrown if v is not a Vector2
    */
    validate(v) {
        // Perform a sanity check to ensure
        if (!(v instanceof Vector2)) {
            throw new TypeError('Parameter must be a Vector2.');
        }
    }
}

/**
    Constructs a circle object.
    @class
*/
class Circle {
    constructor(posx, posy, radius, deltax, deltay) {
        this.x = posx;
        this.y = posy;
        this.r = radius;
        this.dx = deltax;
        this.dy = deltay;

        this.dV = new Vector2(deltax, deltay);
    }

    bounce() {
        // right boundary check
        if (this.x > CANVASX - this.r) {
            //this.dx *= -1;
            this.dx *= -friction;
        }
        // left boundary check
        if (this.x &lt; 0 + this.r) {
            //this.dx *= -1;
            this.dx *= -friction;
        }
        // bottom boundary check
        if (this.y >= CANVASY - this.r) {
            this.dy *= -friction;
            //this.dy *= -1 * friction;
            this.dx *= friction;
            //this.dx -=  friction * this.r * G;
            this.y = CANVASY - this.r;
        }
        // top boundary check
        if (this.y &lt; 0 + this.r) {
            //this.dy *= -1;
            this.dy *= -friction;
        }

        // if change in x or y directions drops below
        if (Math.abs(this.dy) &lt; 1) this.dy = 0
        if (Math.abs(this.dx) &lt; 1) this.dx = 0;
    }
}

// list to store the objects that are to be drawn to the canvas each frame
var objects = [];

/**
    Initialize the rendering environment

    Sets the draw interval for the canvas and initializes the values
    of G and friction
*/
function init() {
    // initialize the draw interval
    setInterval(draw, 50);

    let g = document.getElementById("rngGravity");
    let gravLabel = document.getElementById("gravityValue");

    g.addEventListener("input", function(e) {
            gravLabel.innerHTML = g.value;
    });

    G = parseInt(g.value);
    gravLabel.innerHTML = G;

    let f = document.getElementById("rngFriction");
    let fricLabel = document.getElementById("frictionValue");

    f.addEventListener("input", function(e) {
            fricLabel.innerHTML = f.value;
            friction = 1 - parseFloat(f.value);
            //console.log(friction);
    });

    friction = 1 - parseFloat(f.value);
    fricLabel.innerHTML = f.value;
}

/**
    Draws a frame
*/
function draw() {
    var c = document.getElementById("canvas");
    var ctx = c.getContext("2d");

    var grav = document.getElementById("rngGravity");
    var fric = document.getElementById("rngFriction");

    G = parseInt(grav.value);
    friction = 1 - parseFloat(fric.value);

    grav.innerHTML = grav.value;
    fric.innerHTML = fric.value;

    // clear canvas
    ctx.fillStyle = 'white';
    ctx.fillRect(0,0, 640, 480);

    // redraw each circle
    objects.forEach(item => {
        //item.dy += (item.r / 100) * G;
        item.dy += G;

        item.x += item.dx;
        item.y += item.dy;

        ctx.beginPath();
        ctx.arc(item.x, item.y, item.r, 0, 2 * Math.PI);
        ctx.stroke();

        item.bounce();
    });

    // var d = document.getElementById('stats');
    // d.innerHTML = "x: " + x + "&lt;br />y: " + y + "&lt;br />dx: " + dx + "&lt;br />dy: " + dy;
}

// add a random circle to the objects list
function spawn() {

    let r = randomIntRange(5, 50);

    objects.push(
        new Circle(randomIntRange(0 + r, CANVASX - r), // x position
                   randomIntRange(0 + r, CANVASY - 100), // y position
                   r,      // radius
                   randomIntRange(-15, 15),        // delta-x
                   randomIntRange(-15,15))                  // delta-y
    );

    console.log(objects);
}

// clear the objects list and repaint the canvas
function clearScreen() {
    objects.length = 0;
}

// random int utility functions from https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random
function randomInt(max) {
    return Math.floor(Math.random() * max);
}
function randomIntRange(min, max) {
    min = Math.ceil(min);
    max = Math.floor(max);
    return Math.floor(Math.random() * (max - min) + min); //The maximum is exclusive and the minimum is inclusive
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Circle.html">Circle</a></li><li><a href="Vector2.html">Vector2</a></li></ul><h3>Global</h3><ul><li><a href="global.html#CANVASX">CANVASX</a></li><li><a href="global.html#CANVASY">CANVASY</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#friction">friction</a></li><li><a href="global.html#G">G</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#MAX_OBJ">MAX_OBJ</a></li><li><a href="global.html#MIN_DELTA">MIN_DELTA</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Fri Sep 24 2021 13:15:16 GMT-0400 (Eastern Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
